var playersDetail = [
    {
      "id": 0,
      "playerName": "Hardik Pandya",
      "from": "MI",
      "price": "6.50 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 1,
      "playerName": "Virat Kohli",
      "from": "RCB",
      "price": "8.00 Cr",
      "isPlaying": true,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 2,
      "playerName": "Yuvraj Singh",
      "from": "MI",
      "price": "1.00 Cr",
      "isPlaying": false,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 3,
      "playerName": "Chris Morris",  
      "from": "RR",
      "price": "16.25 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 4,
      "playerName": "Glenn Maxwell",
      "from": "RCB",
      "price": "14.25",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 5,
      "playerName": "Rohit Sharma",
      "from": "MI",
      "price": "6.50 Cr",
      "isPlaying": true,
      "description" : "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 6,
      "playerName": "Ishan Kishan",
      "from": "MI",
      "price": "2.50 Cr",
      "isPlaying": true,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 7 ,
      "playerName": "Yogendra Singh",
      "from": "RCB",
      "price": "1.40 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 8,
      "playerName": "John Mathews",
      "from": "KKR",
      "price": "2.80 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 9,
      "playerName": "Shiv Sharma",
      "from": "RR",
      "price": "2.79 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 10,
      "playerName": "Arun Patel",
      "from": "PW",
      "price": "1.89 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 11,
      "playerName": "Amit Mishra",
      "from": "CSK",
      "price": "2.34 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 12,
      "playerName": "Rickey Ponting",
      "from": "CSK",
      "price": "2.00 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 13,
      "playerName": "Rohit Patel",
      "from": "MI",
      "price": "2.56 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 14,
      "playerName": "Saurav Tiwari",
      "from": "KKR",
      "price": "1.23 Cr",
      "isPlaying": true,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 15,
      "playerName": "Kapil Dev",
      "from": "RR",
      "price": "2.12 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 16,
      "playerName": "Sarik Patel",
      "from": "RCB",
      "price": "1.23 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 17,
      "playerName": "Anil Kumar",
      "from": "DD",
      "price": "2.89 Cr",
      "isPlaying": true,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 18,
      "playerName": "Dinesh Karthik",
      "from": "KKR",
      "price": "1.23 Cr",
      "isPlaying": true,
      "description": "Wicket-Keeper",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 19,
      "playerName": "Dinesh Chandimal",
      "from": "KKR",
      "price": "1.10 Cr",
      "isPlaying": true,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 20,
      "playerName": "Mooeen-ALi",
      "from": "RCB",
      "price": "1.78 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 21,
      "playerName": "Krunal Pandya",
      "from": "MI",
      "price": "0.87 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 22,
      "playerName": "MS Dhoni",
      "from": "CSK",
      "price": "3.89 Cr",
      "isPlaying": true,
      "description": "Wicket-Keeper",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 23,
      "playerName": "Suresh Raina",
      "from": "CSK",
      "price": "1.23 Cr",
      "isPlaying": true,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 24,
      "playerName": "Varun Sharma",
      "from": "DD",
      "price": "1.28 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 25,
      "playerName": "Ravindra Jadeja",
      "from": "PW",
      "price": "2.58 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 26,
      "playerName": "Ravichandran Ashwin",
      "from": "PW",
      "price": "1.34 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 27,
      "playerName": "Axar Patel",
      "from": "PW",
      "price": "3.12 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 28,
      "playerName": "Gagan Narang",
      "from": "CSK",
      "price": "2.12 Cr",
      "isPlaying": true,
      "description": "Bowler",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 29,
      "playerName": "Andre Russel",
      "from": "KKR",
      "price": "1.28 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 30,
      "playerName": "Suresh Kumar",
      "from": "RCB",
      "price": "1.23 Cr",
      "isPlaying": true,
      "description": "All-rounder",
      "playerPic": "./assets/playerAvatar.jpg"
    },
    {
      "id": 31,
      "playerName": "AB Diviliers",
      "from": "RCB",
      "price": "1.34 Cr",
      "isPlaying": true,
      "description": "Batsman",
      "playerPic": "./assets/playerAvatar.jpg"
    }
   ];

var teamDetail = [
    {
       id : 1,
       fullName: "Mumbai Indians",
       key: "MI",
       championshipsWon: 3,
       topbatsman: "Rohit Sharma",
       topbowler: "Kiron Polard",
       teamIcon: "./assets/milogo.jpg"
    },
    {
       id : 2,
       fullName: "Kolkata Knight Riders",
       key: "KKR",
       championshipsWon: 1,
       topbatsman: "John Mathews",
       topbowler: "Andre Russel", 
       teamIcon: "./assets/kkrlogo.jpg"
    },
    {
       id : 3,
       fullName: "Royal Challengers Bangalore",
       key: "RCB",
       championshipsWon:  0,
       topbatsman: "AB Diviliers",
       topbowler: "Mooeen-ALi", 
       teamIcon: "./assets/rcblogo.jpg"
    },
    {
       id : 4,
       fullName: "Pune Warriors",
       key: "PW",
       championshipsWon:  1,
       topbatsman: "Ravindra Jadeja",
       topbowler: "Ravindra Jadeja", 
       teamIcon: "./assets/pwlogo.jpg"
    },
    {
       id : 5,
       fullName: "Rajasthan Royals",
       key: "RR",
       championshipsWon:  2,
       topbatsman: "Kapil Dev",
       topbowler: "Kapil Dev", 
       teamIcon: "./assets/rrlogo.png"
    },
    {
       id : 6,
       fullName: "Chennai Super Kings",
       key: "CSK",
       championshipsWon:  3,
       topbatsman: "MS Dhoni",
       topbowler: "Gagan Narang", 
       teamIcon: "./assets/csklogo.png"
    },
    {
       id : 7,
       fullName: "Delhi Daredevils",
       key: "DD",
       championshipsWon:  1,
       topbatsman: "Anil Kumar",
       topbowler: "Varun Sharma", 
       teamIcon: "./assets/ddlogo.png"
    },
    
    
    
    ];

var toggleFormTeam = 0;
var toggleFormPlayer = 0;

// var teamSubmit = document.getElementById("team-submit");

// window.localStorage.setItem('player-list', JSON.stringify(playersDetail));
// window.localStorage.setItem('second-player-list', JSON.stringify(playersDetail));


// window.localStorage.setItem('team-list', JSON.stringify(teamDetail));
// window.localStorage.setItem('second-team-list', JSON.stringify(teamDetail));
// console.log(teamList);

var playersList = window.localStorage.getItem('player-list');
    playersList = playersList === null || playersList === '' ? [] : playersList;
    playersList = playersList.length > 0 ? JSON.parse(playersList) : [];

    console.log(playersList);
    
var teamList = window.localStorage.getItem('team-list');
    teamList = teamList === null || teamList === '' ? [] : teamList;
    teamList = teamList.length > 0 ? JSON.parse(teamList) : [];

    console.log(teamList);



$(document).ready(() => {


    var selectOpt = $("label #player-team-key").attr("name", "Team Key Value");
    $("label #player-team-key").append( $("<option>").attr("value","").html("--Please choose an option--"))
    
    $.each(teamList , (ele) => {
        var option = $("<option>").attr("value", teamList[ele].key )
        .html(teamList[ele].key);
        var teamImage = $("<img>").attr("src", teamList[ele].teamIcon);
        var teamName = $("<h3>").html(teamList[ele].fullName);
        var cardDiv = $("<div>").addClass("card-div").append(teamImage, teamName);
        var anchorDiv = $("<a>").attr("href", "/teamdetails.html?p="+teamList[ele].id+"").append(cardDiv);
        $(".card-container").append(anchorDiv);
        $("label #player-team-key").append(option);
        
    });
    
    // prventing default of submit and adding data of team
    var teamObj = {

    };
  

    $("#team-submit").click((event) => {
        event.preventDefault();
        teamObj["id"] = (teamList.length + 1);
        teamObj["fullName"] = $("#team-name").val();
        teamObj["key"] = $("#team-key").val();
        teamObj["topbatsman"] = $("#top-batsman-name").val();
        teamObj["topbowler"] = $("#top-bowler-name").val();
        teamObj["championshipsWon"] = $("#team-won").val();
        teamObj["teamIcon"] = $("#team-url").val();
        teamDetail.push(teamObj);

        // window.localStorage.setItem('second-team-list', JSON.stringify(teamDetail));
        window.localStorage.setItem('team-list', JSON.stringify(teamDetail));
        teamList = window.localStorage.getItem('team-list');
        teamList = teamList === null || teamList === '' ? [] : teamList;
        teamList = teamList.length > 0 ? JSON.parse(teamList) : [];
        console.log(teamList);
            var option = $("<option>").attr("value", teamObj.key )
            .html(teamObj.key);
            var teamImage = $("<img>").attr("src", teamObj.teamIcon);
            var teamName = $("<h3>").html(teamObj.fullName);
            var cardDiv = $("<div>").addClass("card-div").append(teamImage, teamName);
            var anchorDiv = $("<a>").attr("href", "/teamdetails.html?p="+ teamObj["id"] +" >").append(cardDiv);
            $(".card-container").append(anchorDiv);
            $("label #player-team-key").append(option);
            alert("Team Succesfully Added");
                   

    });
    var playerObj = {

    };

    $("#player-submit").click( (event) => {
        event.preventDefault();

        
        
        playerObj["id"] = (Number(playersDetail.length)+ 1) ;
        playerObj["playerName"] = $("#player-team-name").val() ;
        playerObj["from"] = $('#player-team-key :selected').text();
        playerObj["price"] = $("#player-fee").val() +" Cr";
        playerObj["description"] = $("#player-type").val();
        playerObj["playerPic"] = $("#player-pic-url").val();
        playerObj["isPlaying"] = Boolean($("#radio-input input").val());

        console.log(playerObj);

        playersDetail.push(playerObj);
        // window.localStorage.setItem('second-player-list', JSON.stringify(playersDetail));
        window.localStorage.setItem('player-list', JSON.stringify(playersDetail));
        var playersList = window.localStorage.getItem('player-list');
        playersList = playersList === null || playersList === '' ? [] : playersList;
        playersList = playersList.length > 0 ? JSON.parse(playersList) : [];
        console.log(playersList);
        alert("Player Succesfully Added");

    });

    
    $("#search-box").keyup(function (e) { 
      // #search-div productLink.href = '/showitem.html?p='+obj.id;
      // #search-result-div
      $(" #search-result-div ol").html(" ");
      var searchValue = ($("#search-box").val());
      var searchResult = playersList.filter(item => item.playerName.toLowerCase().includes(searchValue, 0));
      console.log(searchResult);
      $.each(searchResult, (e) => {
        var filteredPlayerData = $("<li>").html("<a href="+"/playerdetail.html?p="+searchResult[e].id +" ><h3>"+searchResult[e].playerName+" "+"("+searchResult[e].from +")"+"</h3></a>"); 
        $(" #search-result-div ol").append(filteredPlayerData);
      });

    });



    $("#btn-show-hide-team-form").click( () => {
        if(toggleFormTeam === 0) {
            $("#team-div").css("display", "inline-block");
            toggleFormTeam = 1;
        }else {
            $("#team-div").css("display", "none");
            toggleFormTeam = 0;
        }
        

    });

    $("#btn-show-hide-player-form").click( () => {
        // $("#player-div").css("display", "inline-block");
        if(toggleFormPlayer === 0) {
            $("#player-div").css("display", "inline-block");
            toggleFormPlayer = 1;
        }else {
            $("#player-div").css("display", "none");
            toggleFormPlayer = 0;
        }
    });







});